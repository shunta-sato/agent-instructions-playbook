<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tonemana Style Tile</title>
  <link rel="stylesheet" href="./style-tile.css" />
  <link id="patternTokens" rel="stylesheet" href="../tokens/neutral-minimal.tokens.css" />
</head>
<body>
  <header class="stack">
    <h1>Tone &amp; Manner Preview</h1>
    <p class="muted">Compare visual rules and writing style from catalog patterns.</p>
    <label class="pattern-control" for="patternSelect">
      Pattern
      <select id="patternSelect" aria-label="Select tone and manner pattern"></select>
    </label>
  </header>

  <main class="grid">
    <section class="card stack">
      <h2>Components</h2>
      <div class="row">
        <button class="btn-primary">主要アクション</button>
        <button class="btn-secondary">副次アクション</button>
      </div>
      <label>入力項目
        <input type="text" placeholder="メールアドレス" />
      </label>
      <ul>
        <li>リスト項目 A</li>
        <li>リスト項目 B</li>
      </ul>
    </section>

    <section class="card stack">
      <h2>Typography</h2>
      <h3>見出しサンプル</h3>
      <p>本文サンプル。読みやすさと行間を確認します。<a href="#">リンク</a>の見え方も確認します。</p>
      <div class="alert" role="alert">
        エラー文例: 通信が不安定です。接続を確認して、もう一度お試しください。
      </div>
    </section>
  </main>

  <script>
    const PATTERNS = [
      'neutral-minimal',
      'trust-corporate',
      'warm-friendly',
      'modern-tech',
      'natural-organic',
      'premium-elegant',
      'bold-energetic'
    ];

    function applyPattern(pattern) {
      const nextPattern = PATTERNS.includes(pattern) ? pattern : 'neutral-minimal';
      document.getElementById('patternTokens').href = `../tokens/${nextPattern}.tokens.css`;

      const url = new URL(window.location.href);
      url.searchParams.set('pattern', nextPattern);
      history.replaceState({}, '', url);
      return nextPattern;
    }

    const params = new URLSearchParams(window.location.search);
    const initialPattern = applyPattern(params.get('pattern') || 'neutral-minimal');

    const select = document.getElementById('patternSelect');
    PATTERNS.forEach((pattern) => {
      const option = document.createElement('option');
      option.value = pattern;
      option.textContent = pattern;
      select.appendChild(option);
    });
    select.value = initialPattern;

    select.addEventListener('change', (event) => {
      applyPattern(event.target.value);
    });
  </script>
</body>
</html>
